<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Movie Recommendation System">
  <meta name="author" content="ਅਮਨਿੰਦਰ ਸਿੰਘ ਨਰੋਤਾ">

  <title>Movie Recommender</title>

  <!-- Bootstrap Core CSS -->
  <link href="{{STATIC_URL}}bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Timeline CSS -->
  <link href="{{STATIC_URL}}sb-admin-2/css/plugins/timeline.css" rel="stylesheet">

  <!-- MetisMenu CSS -->
  <link href="{{STATIC_URL}}sb-admin-2/css/plugins/metisMenu/metisMenu.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="{{STATIC_URL}}sb-admin-2/css/sb-admin-2.css" rel="stylesheet">

  <!-- Custom Fonts -->
  <link href="{{STATIC_URL}}fontawesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

  <!-- JQuery -->
  <script src="https://code.jquery.com/jquery-2.1.1.js"></script>

  <!-- MORRIS CHARTS -->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
  <script src="http://cdn.oesmith.co.uk/morris-0.4.1.min.js"></script>

  <script>
  $(document).ready(function() {
    function getCookie(name) {
      var cookieValue = null;
      if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
          var cookie = jQuery.trim(cookies[i]);
          // Does this cookie string begin with the name we want?
          if (cookie.substring(0, name.length + 1) == (name + '=')) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
          }
        }
      }
      return cookieValue;
    }

    $("#search_movie_name_button").click(
      function(event){
        var val = $("#movie_name_input").val();
        redirect_to_search(val);
        // var value = {
        //     'csrfmiddlewaretoken': getCookie('csrftoken'),
        //     'movie_name_input': $("#movie_name_input").val()}
        // var url = "/get_movie/";
        //
        // $.ajax({
        //   url : url,
        //   type: "POST",
        //   data : value,
        //   success: function(data, textStatus, jqXHR)
        //   {
        //     //data - response from server
        //     // console.log(textStatus)
        //     // alert(data);
        //     $("#movie-names-area").html("");
        //     // $("#movie-names-area").append(data);
        //     // $.each($.parseJSON(data), function(key, value){
        //     //   $("#movie-names-area").append(key + ": "+value+"<br/>");
        //     // });
        //     Morris.Bar({
        //       element: 'bar-graph',
        //       // barColors: ['#00CDC6'],
        //       resize: true,
        //       xLabelAngle: '60',
        //       // axes: false,
        //       data: JSON.parse(data),
        //       xkey: 'title',
        //       ykeys: ['percent'],
        //       labels: ['Similarity '],
        //       yLabelFormat: function(d){
        //         return d.toString() + "%";
        //       }
        //     });
        //   },
        //   error: function (jqXHR, textStatus, errorThrown)
        //   {
        //     // alert(textStatus);
        //     $("#movie-names-area").html("");
        //     $("#movie-names-area").append(textStatus);
        //   }
        // });
      }
    );
    function redirect_to_search(val){
      var value = val.replace(/\s+/g, '+');
      // alert(val)
      window.location = "http://127.0.0.1:8000/movies/?q="+value;
    }
  });
  </script>

</head>

<body>
  {% csrf_token %}
  <div id="wrapper">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Movie Recommender</a>
      </div>
      <!-- /.navbar-header -->



      <div class="navbar-default sidebar" role="navigation">
        <div class="sidebar-nav navbar-collapse">
          <ul class="nav" id="side-menu">
            <li class="sidebar-search">
              <div class="input-group custom-search-form">
                <input type="text" class="form-control" placeholder="Enter Movie Title..." id="movie_name_input">
                <span class="input-group-btn">
                  <button class="btn btn-default" type="button" id="search_movie_name_button">
                    <i class="fa fa-search"></i>
                  </button>
                </span>
              </div>
              <!-- /input-group -->
            </li>
            <li>
              <a class="active" href="{% url 'haystack_search' %}"><i class="fa fa-dashboard fa-fw"></i> Home</a>
            </li>
          </ul>
        </div>
        <!-- /.sidebar-collapse -->
      </div>
      <!-- /.navbar-static-side -->
    </nav>
    {%block content%}
    {%endblock%}

  </div>
  <!-- /#wrapper -->

  <!-- jQuery -->
  <script src="{{STATIC_URL}}sb-admin-2/js/jquery.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="{{STATIC_URL}}sb-admin-2/js/bootstrap.min.js"></script>

  <!-- Metis Menu Plugin JavaScript -->
  <script src="{{STATIC_URL}}sb-admin-2/js/plugins/metisMenu/metisMenu.min.js"></script>

  <!-- Custom Theme JavaScript -->
  <script src="{{STATIC_URL}}sb-admin-2/js/sb-admin-2.js"></script>
</body>

</html>
